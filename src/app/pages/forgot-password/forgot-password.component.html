<main>
  <mat-stepper orientation="vertical" [linear]="isLinear" #stepper>
    <mat-step [stepControl]="emailForm">
      <form [formGroup]="emailForm">
        <ng-template matStepLabel>Request Password Reset Code</ng-template>
        <mat-form-field>
          <input
            type="text"
            matInput
            placeholder="Email"
            formControlName="email"
            autocomplete="off"
          />
        </mat-form-field>
        <button
          mat-button
          matStepperNext
          [disabled]="!emailForm.valid"
          (click)="submitEmail()"
        >
          Next
        </button>
      </form>
    </mat-step>
    <mat-step [stepControl]="confirmCodeForm">
      <form [formGroup]="confirmCodeForm">
        <ng-template matStepLabel>Password Reset</ng-template>
        <mat-form-field>
          <input
            type="email"
            matInput
            placeholder="Email"
            formControlName="email"
            readonly
          />
        </mat-form-field>
        <mat-form-field>
          <input
            type="text"
            matInput
            placeholder="Confirmation Code"
            formControlName="confirmationCode"
            autocomplete="off"
          />
        </mat-form-field>
        <button
          mat-button
          matStepperNext
          [disabled]="!confirmCodeForm.valid"
          (click)="submitCode()"
        >
          Next
        </button>
      </form>
    </mat-step>
    <mat-step>
      <ng-template matStepLabel>Next Steps</ng-template>
      <p>You are now done.</p>
      <div class="final-step-buttons">
        <button mat-button matStepperPrevious>Back</button>
        <button mat-button (click)="stepper.reset()">Reset</button>
      </div>
    </mat-step>
  </mat-stepper>
</main>
